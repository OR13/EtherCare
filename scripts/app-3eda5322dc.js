/******/!function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return e[i].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}// webpackBootstrap
/******/
var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){var i=n(1),o=n(2),r=n(3),a=n(4),c=n(6),s=n(7),l=n(8),p=n(5),d=n(9),u=n(10),h=n(11),m=n(12),v=n(13),$=n(14),f=n(15),g=n(16);angular.module("ethercareApp",["ngMaterial","ngAnimate","ngCookies","ngSanitize","ngMessages","ngAria","ngResource","angularMoment","ui.router","toastr","LocalStorageModule","ui.ace"]).constant("moment",moment).config(i.config).config(o.routerConfig).run(r.runBlock).service("EthereumService",s.EthereumService).service("SecurityService",c.SecurityService).service("EtherCareService",p.EtherCareService).service("IpfsService",l.IpfsService).controller("DemoController",a.DemoController).controller("ContentViewV0Controller",h.ContentViewV0Controller).directive("ecContentViewV0",m.ecContentViewV0).controller("TextInputV0Controller",v.TextInputV0Controller).directive("ecTextInputV0",$.ecTextInputV0).controller("BooleanInputV0Controller",f.BooleanInputV0Controller).directive("ecBooleanInputV0",g.ecBooleanInputV0).directive("appNavbar",d.appNavbar).directive("ethercareApp",u.ethercareApp)},function(e,t){function n(e,t,n,i,o,r){e.debugEnabled(!0),i.allowHtml=!0,i.timeOut=3e3,i.positionClass="toast-top-right",i.preventDuplicates=!0,i.progressBar=!0,o.setPrefix("ethercare"),n.theme("etherCareTheme").primaryPalette("blue",{"default":"700","hue-1":"800","hue-2":"600","hue-3":"A400"}).accentPalette("green",{"default":"400"}).warnPalette("orange").backgroundPalette("grey",{"default":"200","hue-1":"100","hue-2":"200","hue-3":"800"}),n.theme("dark-grey").primaryPalette("blue").accentPalette("light-blue").warnPalette("orange").backgroundPalette("grey").dark(),n.setDefaultTheme("etherCareTheme")}n.$inject=["$logProvider","$httpProvider","$mdThemingProvider","toastrConfig","localStorageServiceProvider","$mdIconProvider"],t.config=n},function(e,t){function n(e,t){e.state("demo",{url:"/demo",templateUrl:"app/demo/demo.html",controller:"DemoController",controllerAs:"demoCtrl"});window;t.otherwise("/demo")}n.$inject=["$stateProvider","$urlRouterProvider"],t.routerConfig=n},function(e,t){function n(e,t,n,i,o,r,a,c){window;i.App={},i.App.Version="0.0.0",i.App.EthereumService=r,i.App.IpfsService=a,i.App.EtherCareService=c,i.$on("$stateChangeStart",function(e,t,n){t.redirectTo&&(e.preventDefault(),o.go(t.redirectTo,n,{location:"replace"}))})}n.$inject=["$location","$timeout","$log","$rootScope","$state","EthereumService","IpfsService","EtherCareService"],t.runBlock=n},function(e,t,n){var i=n(5),o=function(){function e(e,t,n,o,r,a,c,s,l,p){var d=this;this.$scope=e,this.$mdSidenav=t,this.$http=n,this.$log=o,this.$rootScope=r,this.$timeout=a,this.$interval=c,this.$sce=s,this.$mdDialog=l,this.toastr=p,this.aceLoaded=function(e){d.ethereum_editor=e,d.$rootScope.$watch(function(){return d.$rootScope.App.EthereumService.accounts},function(e){var t=JSON.stringify(d.$rootScope.App.EthereumService.accounts);d.$log.debug(" heard ed_val ",t),t&&(d.ethereum_editor.setValue(t),d.ethereum_editor.setReadOnly(!0))});var t=e.getSession(),n=e.renderer;t.setUndoManager(new ace.UndoManager),n.setShowGutter(!1)},this.aceChanged=function(e){},this.patient=this.$rootScope.App.EtherCareService.patients[0],this.$rootScope.App.EtherCareService.scheduleActivities(),KeenAsync.ready(function(){d.$rootScope.App.EtherCareService.renderLast100PatientSnapshots(),d.$rootScope.App.EtherCareService.renderPageViews(),d.$rootScope.App.EtherCareService.loadIpfsImage()}),this.ct=i.ComponentTypes}return e.$inject=["$scope","$mdSidenav","$http","$log","$rootScope","$timeout","$interval","$sce","$mdDialog","toastr"],e}();t.DemoController=o},function(e,t){!function(e){e[e.Incomplete=0]="Incomplete",e[e.Complete=1]="Complete"}(t.ActivityInstanceStatus||(t.ActivityInstanceStatus={}));var n=t.ActivityInstanceStatus;!function(e){e[e.text_input_v0=0]="text_input_v0",e[e.boolean_input_v0=1]="boolean_input_v0",e[e.content_view_v0=2]="content_view_v0"}(t.ComponentTypes||(t.ComponentTypes={}));var i=t.ComponentTypes,o=function(){function e(e,t,o,r,a,c){var s=this;this.$timeout=e,this.$log=t,this.$http=o,this.$window=r,this.$q=a,this.$rootScope=c,this.isSpecInInstances=function(e,t){var n=!1;return t.forEach(function(t){e.schema_config.uid===t.activity_spec.schema_config.uid&&(n=!0)}),n},this.getNextInstance=function(e){var t=null;return e.activity_instances.forEach(function(e){t?t.activity_spec.render_config.priority<e.activity_spec.render_config.priority&&(t=e):t=e}),t},this.loadIpfsImage=function(){s.$rootScope.App.IpfsService.ipfs.cat("QmRcm8yiCYmQ1jDxhUVtsjvps4XjtjSTziVSdQsszuiRfw").then(function(e){s.$log.debug("cat: ",e.url);var t=document.getElementById("ipfs_image_tag");t.src=e.url,s.$rootScope.$apply()})["catch"](function(e){s.$log.debug("Fail: ",e)})},this.schedule=function(){s.patients.forEach(function(e){e.activity_suite.activity_specs.forEach(function(t){var i=s.isSpecInInstances(t,e.activity_instances);if(i);else{var o=angular.copy({activity_spec:angular.copy(t),capture:{},status:n.Incomplete});e.activity_instances.push(o),s.$log.debug("activity_instance added...",o)}})})},this.captureAll=function(e,t){s.$log.debug("patient snapshot: ",e),s.$log.debug("instance snapshot: ",t),s.capturePatientSnapshot(e),s.captureInstanceSnapshot(t)},this.capturePatientSnapshot=function(e){s.$log.debug("begin capturePatientSnapshot"),s.$rootScope.App.EtherCareService.keen_capture_client.recordEvent("patient_snapshot",{patient:angular.copy(e)})},this.captureInstanceSnapshot=function(e){s.$log.debug("begin capturePatientSnapshot"),s.$rootScope.App.EtherCareService.keen_capture_client.recordEvent("instant_snapshot",{instance:angular.copy(e)})},this.renderLast100PatientSnapshots=function(){var e=new Keen({projectId:"57da290c8db53dfda8a6fbdb",readKey:"8D252E9D83BB7F4E514C49B908C1EB0072A8B0B4E37C17A51FE0DA90E987B096E00A764584B424C4D0FFF8069BBF805B04C6BCE14F926A6910D780E47AEAB4958D89146EEAA15629D28D2F30665876E9ADBB85E152AE237DFD15CC1D372E9673"}),t=(new Keen.Dataviz).el("#chart_1").colors(["#6ab975"]).height(180).type("metric").prepare();e.query("count",{event_collection:"instant_snapshot",targetProperty:"instance.capture.value",timeframe:"this_14_days",timezone:"UTC"}).then(function(e){t.data(e).render()})["catch"](function(e){t.message(e.message)})},this.renderPageViews=function(){var e=new Keen({projectId:"57da290c8db53dfda8a6fbdb",readKey:"8D252E9D83BB7F4E514C49B908C1EB0072A8B0B4E37C17A51FE0DA90E987B096E00A764584B424C4D0FFF8069BBF805B04C6BCE14F926A6910D780E47AEAB4958D89146EEAA15629D28D2F30665876E9ADBB85E152AE237DFD15CC1D372E9673"}),t=(new Keen.Dataviz).el("#chart_2").colors(["#6ab975"]).height(180).type("area").prepare();e.query("count",{event_collection:"pageviews",interval:"daily",timeframe:"this_14_days"}).then(function(e){t.data(e).render()})["catch"](function(e){t.message(e.message)})},this.scheduleActivities=function(){s.schedule();var e=later.parse.text("every 60 seconds");later.schedule(e).next(10),later.setInterval(function(){s.schedule()},e)},KeenAsync.ready(function(){s.keen_capture_client=new KeenAsync({projectId:"57da290c8db53dfda8a6fbdb",writeKey:"48EA3BFFB284C3A424D04F4EF80E857DE6A822816F56956A65A4F1369FCC3B63B41180CE94D3FEF38A0A801ADEBCB82935C864F6A62B3DDEE3226488E295003D02B97E2D04EE8AD181C18D67845BB4703764BF0AC62C361E6E3301AFBA9D6F95"}),s.keen_query_client=new KeenAsync({projectId:"57da290c8db53dfda8a6fbdb",readKey:"8D252E9D83BB7F4E514C49B908C1EB0072A8B0B4E37C17A51FE0DA90E987B096E00A764584B424C4D0FFF8069BBF805B04C6BCE14F926A6910D780E47AEAB4958D89146EEAA15629D28D2F30665876E9ADBB85E152AE237DFD15CC1D372E9673"});var e=window;s.keen_sync_client=e.keen_sync_client});var l="0/120 * * * *";this.ActivitySuite={activity_specs:[{cron_expression:l,expiration_criteria:"NEVER",render_config:{label:"Enter a word",priority:2,md_theme:"dark-grey",icon:"feedback",component:i.text_input_v0},schema_config:{uid:"0",title:"What word best describes your day?",name:"word",type:"string"}},{cron_expression:l,expiration_criteria:"NEVER",render_config:{label:"Feel well?",priority:1,md_theme:"dark-grey",icon:"healing",component:i.boolean_input_v0},schema_config:{uid:"1",title:"Do you feel well today?",name:"is_feeling_well",type:"boolean"}},{cron_expression:l,expiration_criteria:"NEVER",render_config:{label:"Rate this video",priority:3,md_theme:"dark-grey",icon:"ondemand_video",component:i.content_view_v0},schema_config:{uid:"2",title:"Meditation Excercise",video_url:"http://www.youtube.com/embed/NlOF03DUoWc",name:"has_read_content_view",type:"boolean"}}]},this.patients=[{name:"Janet Perkins",image:"/assets/img/avatar.jpeg",activity_suite:this.ActivitySuite,activity_instances:[]}]}return e.$inject=["$timeout","$log","$http","$window","$q","$rootScope"],e}();t.EtherCareService=o},function(e,t){var n=function(){function e(e,t,n,i,o,r,a,c,s){var l=this;this.$timeout=e,this.$log=t,this.$http=n,this.$window=i,this.$q=o,this.$mdToast=r,this.$state=a,this.$rootScope=c,this.localStorageService=s,this.init=function(){l.$log.debug("SecurityService.init()",sjcl)},this.saveAccountSecret=function(e){l.localStorageService.set("AccountSecret",e)},this.getAccountSecret=function(){return l.localStorageService.get("AccountSecret")},this.encryptObject=function(e,t){var n=JSON.stringify(t),i=sjcl.encrypt(e,n),o=JSON.parse(i);return o},this.decryptObject=function(e,t){var n=sjcl.decrypt(e,JSON.stringify(t));return JSON.parse(n)}}return e.$inject=["$timeout","$log","$http","$window","$q","$mdToast","$state","$rootScope","localStorageService"],e}();t.SecurityService=n},function(e,t){var n=function(){function e(e,t,n,i,o,r,a,c){this.$timeout=e,this.$log=t,this.$http=n,this.$window=i,this.$q=o,this.$mdToast=r,this.$state=a,this.$rootScope=c,this.w=window,this.web3=this.w.web3,this.isOnline=void 0!==this.web3,this.isOnline&&(this.accounts=this.w.web3.eth.accounts)}return e.$inject=["$timeout","$log","$http","$window","$q","$mdToast","$state","$rootScope"],e}();t.EthereumService=n},function(e,t){var n=function(){function e(e,t,n,i,o,r,a,c){var s=this;this.$timeout=e,this.$log=t,this.$http=n,this.$window=i,this.$q=o,this.$mdToast=r,this.$state=a,this.$rootScope=c;var l=window,p="127.0.0.1",d="5001";this.ipfs=l.IpfsApi(p,d),this.isOnline=!1,this.ipfs.id().then(function(e){s.$log.debug("my id is: ",e),s.isOnline=!0})["catch"](function(e){console.log("Fail: ",e)})}return e.$inject=["$timeout","$log","$http","$window","$q","$mdToast","$state","$rootScope"],e}();t.IpfsService=n},function(e,t){function n(){return{restrict:"E",scope:{},templateUrl:"app/navbar/navbar.html",controller:i,controllerAs:"vm",bindToController:!0}}t.appNavbar=n;var i=function(){function e(e,t,n,i,o){this.$window=e,this.$scope=t,this.$log=n,this.$rootScope=i,this.$mdSidenav=o}return e.$inject=["$window","$scope","$log","$rootScope","$mdSidenav"],e}();t.NavbarController=i},function(e,t){function n(){return{restrict:"A",controller:i,controllerAs:"etherCareAppCtrl"}}t.ethercareApp=n;var i=function(){function e(e,t,n,i,o,r){var a=this;this.$state=e,this.$window=t,this.$scope=n,this.$log=i,this.$rootScope=o,this.$mdSidenav=r,this.bodyClass=e.current.name,o.$watch(function(){return e.current.name},function(e){e&&(i.debug("state: ",e),a.bodyClass=e)})}return e.$inject=["$state","$window","$scope","$log","$rootScope","$mdSidenav"],e}();t.EtherCareAppController=i},function(e,t){var n=function(){function e(e,t,n,i,o,r){var a=this;this.$window=e,this.$scope=t,this.$log=n,this.$rootScope=i,this.$mdSidenav=o,this.$sce=r,this.submit=function(e){a.$log.debug("patient snapshot: ",a.patient),a.instance.capture.value=e;var t=a.patient.activity_instances.indexOf(a.instance);a.patient.activity_instances.splice(t,1),a.$rootScope.App.EtherCareService.captureAll(a.patient,a.instance)},this.video_url=r.trustAsResourceUrl(this.instance.activity_spec.schema_config.video_url)}return e.$inject=["$window","$scope","$log","$rootScope","$mdSidenav","$sce"],e}();t.ContentViewV0Controller=n},function(e,t,n){function i(){return{restrict:"E",scope:{patient:"=",instance:"="},templateUrl:"app/demo/capture/content_view_v0/content_view_v0.partial.html",controller:o.ContentViewV0Controller,controllerAs:"vm",bindToController:!0}}var o=n(11);t.ecContentViewV0=i},function(e,t){var n=function(){function e(e,t,n,i,o,r){var a=this;this.$window=e,this.$scope=t,this.$log=n,this.$rootScope=i,this.$mdSidenav=o,this.$sce=r,this.submit=function(){var e=a.patient.activity_instances.indexOf(a.instance);a.patient.activity_instances.splice(e,1);a.$rootScope.App.EtherCareService.captureAll(a.patient,a.instance)}}return e.$inject=["$window","$scope","$log","$rootScope","$mdSidenav","$sce"],e}();t.TextInputV0Controller=n},function(e,t,n){function i(){return{restrict:"E",scope:{patient:"=",instance:"="},templateUrl:"app/demo/capture/text_input_v0/text_input_v0.partial.html",controller:o.TextInputV0Controller,controllerAs:"vm",bindToController:!0}}var o=n(13);t.ecTextInputV0=i},function(e,t){var n=function(){function e(e,t,n,i,o,r){var a=this;this.$window=e,this.$scope=t,this.$log=n,this.$rootScope=i,this.$mdSidenav=o,this.$sce=r,this.submit=function(e){a.$log.debug("patient snapshot: ",a.patient),a.instance.capture.value=e;var t=a.patient.activity_instances.indexOf(a.instance);a.patient.activity_instances.splice(t,1),a.$rootScope.App.EtherCareService.captureAll(a.patient,a.instance)}}return e.$inject=["$window","$scope","$log","$rootScope","$mdSidenav","$sce"],e}();t.BooleanInputV0Controller=n},function(e,t,n){function i(){return{restrict:"E",scope:{patient:"=",instance:"="},templateUrl:"app/demo/capture/boolean_input_v0/boolean_input_v0.partial.html",controller:o.BooleanInputV0Controller,controllerAs:"vm",bindToController:!0}}var o=n(15);t.ecBooleanInputV0=i}]),angular.module("ethercareApp").run(["$templateCache",function(e){e.put("app/demo/demo.html",'<app-navbar></app-navbar><md-content class="md-padding" layout-xs="column" layout="row"><div layout="column" flex="70" class="status-cards"><md-card id="ipfs_image_card" md-theme="" md-theme-watch=""><img id="ipfs_image_tag" src="" alt="IPFS DEMO"><md-card-actions layout="row" layout-align="start center"><span ng-show="demoCtrl.$rootScope.App.IpfsService.isOnline">IPFS is running! Here is a squirrel.</span> <span ng-hide="demoCtrl.$rootScope.App.IpfsService.isOnline">IPFS is offline! No squirrel for you.</span></md-card-actions></md-card><md-card id="meta_mask_card" md-theme="" md-theme-watch=""><div layout-fill="" id="ethereum_editor" ui-ace="{ useWrapMode : true, showGutter: false, theme:\'twilight\', mode: \'xml\', firstLineNumber: 5, onLoad: demoCtrl.aceLoaded, onChange: demoCtrl.aceChanged }"></div><md-card-actions layout="row" layout-align="start center"><span ng-show="demoCtrl.$rootScope.App.EthereumService.isOnline">Ethereum is running! Here are your accounts.</span> <span ng-hide="demoCtrl.$rootScope.App.EthereumService.isOnline">Ethereum is offline! No accounts for you.</span></md-card-actions></md-card><md-card id="chart_1" md-theme="" md-theme-watch=""></md-card><md-card id="chart_2" md-theme="" md-theme-watch=""></md-card></div><div layout="column"><div ng-repeat="instance in demoCtrl.patient.activity_instances"><ec-content-view-v0 ng-if="instance.activity_spec.render_config.component === demoCtrl.ct.content_view_v0" patient="demoCtrl.patient" instance="instance"></ec-content-view-v0><ec-text-input-v0 ng-if="instance.activity_spec.render_config.component === demoCtrl.ct.text_input_v0" patient="demoCtrl.patient" instance="instance"></ec-text-input-v0><ec-boolean-input-v0 ng-if="instance.activity_spec.render_config.component === demoCtrl.ct.boolean_input_v0" patient="demoCtrl.patient" instance="instance"></ec-boolean-input-v0></div></div></md-content>'),e.put("app/navbar/navbar.html",'<md-toolbar class="app-navbar" layout="row" layout-align="center center" layout-padding=""><a class="brand-link" ui-sref="demo" flex="">EtherCare</a> <a class="md-button" href="https://github.com/OR13/EtherCare">Source</a> <a class="md-button" href="http://ec.or13.io">Live</a></md-toolbar>'),e.put("app/demo/capture/boolean_input_v0/boolean_input_v0.partial.html",'<md-card class="ec-capture-card" md-theme="{{ vm.instance.activity_spec.render_config.md_theme }}" md-theme-watch=""><md-card-actions layout="row" layout-align="end center"><span flex="" layout-padding="">{{vm.instance.activity_spec.schema_config.title}}</span><md-button ng-click="vm.submit(0)" class="">No</md-button><md-button ng-click="vm.submit(1)" class="">Yes</md-button></md-card-actions></md-card>'),e.put("app/demo/capture/content_view_v0/content_view_v0.partial.html",'<md-card class="ec-capture-card" md-theme="{{ vm.instance.activity_spec.render_config.md_theme }}" md-theme-watch=""><iframe style="min-height: 480px" class="youtube-player" type="text/html" layout-fill="" ng-src="{{vm.video_url}}" frameborder="0" allowfullscreen=""></iframe><md-card-actions layout="row" layout-align="end center"><span flex="" layout-padding="">How likely are you to recommend this video?</span><md-button ng-click="vm.submit(rating)" ng-repeat="rating in [1, 2, 3]" class="">{{rating}}</md-button></md-card-actions></md-card>'),e.put("app/demo/capture/text_input_v0/text_input_v0.partial.html",'<md-card class="ec-capture-card" md-theme="{{ vm.instance.activity_spec.render_config.md_theme }}" md-theme-watch=""><md-card-title><md-card-title-text><span class="md-headline">{{vm.instance.activity_spec.schema_config.title}}</span></md-card-title-text></md-card-title><md-card-content><md-input-container layout-fill=""><label>{{vm.instance.activity_spec.render_config.label}}</label> <input ng-model="vm.instance.capture.value" type="text" flex=""></md-input-container></md-card-content><md-card-actions layout="row" layout-align="end center"><md-button ng-click="vm.submit()" class="">Submit</md-button></md-card-actions></md-card>')}]);
//# sourceMappingURL=../maps/scripts/app-3eda5322dc.js.map
